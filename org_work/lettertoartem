Здравствуй Артем!

Есть еще замечания:

     Бит TX-counter должен выставляться после того как пакет будет извлечен из "буфера передачи".

     В байте с битом TX-counter(от модема) бит DCD  должен быть ,только, если, следующая посылка (в модем) может переполнить его буфер передачи.

     Байт с битом DCD должен отправляться сразу как только обнаружено что следующая посылка может переполнить буфер передачи.


> Krolikov M.S. писал 2016-12-22
>Есть зависимость
>пакеты размерами 26, 29, 32, 35 - всегда битые приходят или вообще не приходят вообще.
>
>Похоже дело в хвосте из трех байтов
>
>Ты похоже функцию decode_tail не  используешь из sixpack.c .
>
>Проверь кстати что обнуляешь счетчики перед началом декодирования следующего 
>пакета.   sp.rx_count = 0; sp.rx_count_cooked = 0;
