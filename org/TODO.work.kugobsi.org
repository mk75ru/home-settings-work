* БСИ и КУГО
** DONE сделать репозиторий под проект и задачу на jenkins, и добавить туда радиоканал, и gprs, добавить их в sysup и webui.
   CLOSED: [2016-07-04 Пн 16:31]
** DONE в radio-ax25 добавить возможность запуска  скрипта которому  передавать переменные из конфига.  
   CLOSED: [2016-07-04 Пн 11:24]
** DONE сделать проверку рабочеспособности ax25.
   CLOSED: [2016-07-04 Пн 16:34]
** DONE Выпилить DTMF
   CLOSED: [2016-11-22 Вт 10:08]
** DONE отправка аудио на КУГО в интернет канале.
   CLOSED: [2016-11-22 Вт 12:06]
** DONE прием подтверждения от домофона на дискретный вход.
   CLOSED: [2016-11-22 Вт 12:06]
** DONE вывести список абонентов и их ip в вебинтерфейс.(сделано но коряво)
   CLOSED: [2016-11-22 Вт 12:08]
** DONE сделать инициализацию arp таблицы при запуске radio-ax25   
   CLOSED: [2016-11-26 Сб 16:17]
** DONE добавить сброс модема и радиостанции.
   CLOSED: [2016-11-26 Сб 16:17]
** DONE разобраться c D8 нужно ее закладывать в очередь чтоб не лезла в оповещение.
   CLOSED: [2016-11-28 Пн 12:09]
** DONE Квитанцию домофона отправлять после прихода команды окончания оповещения 'l'.
   CLOSED: [2016-11-28 Пн 14:52]
** DONE Скорректировать Квитанцию домофона.
   CLOSED: [2016-11-28 Пн 14:52]
** DONE Вывести в webui  список абонентов.
   CLOSED: [2016-11-29 Вт 10:12]
** DONE Добавить настройку в программу и в webui , флаг LinkKugo  "КУГО-БСИ/КУГО-ЦЕНТР" ,определяющий, подключение КУГО.
   CLOSED: [2016-11-29 Вт 10:12]
** DONE Если "КУГО-ЦЕНТР" то из КУГО отправляем квитанции  v,l и  v,a.
   CLOSED: [2016-11-29 Вт 10:12]
** DONE запись с line in
   CLOSED: [2016-12-01 Чт 11:31]

** DONE сбор квитанций по запросу
   CLOSED: [2016-12-26 Пн 15:01]

** DONE отправка аудио на КУГО в радиоканале. НАДО ДОРАБАТЫВАТЬ ЗВУКОВОЙ СЕРВЕР.
   CLOSED: [2016-12-26 Пн 15:20]
** DONE учет квитанций, особенности отправки по радиоканалу(будут отправляться как обычно но возможно после сеанса). (Отправляются квитанции, последняя R)
   CLOSED: [2016-12-26 Пн 15:21]
** DONE формирование квитанции об состоянии устройства БСС. - СДЕЛАНО НО НЕ ПРОВЕРЕНО.
   CLOSED: [2017-01-24 Вт 15:00]
** DONE разделить настройки КУГО и БСИ, сделать vip-kugo.ini vip-bsi.ini, и сделать   соответствующие пункты  в меню webui
   CLOSED: [2017-01-24 Вт 15:12]
** DONE "НЕ МОЕ"  Для КУГО И БСИ изменить поведение кнопок
  CLOSED: [2017-01-31 Вт 09:12]
** DONE "НЕ МОЕ"  Уменьшить шум при оповещении через домофон
   CLOSED: [2017-01-31 Вт 09:12]
** DONE "НЕ МОЕ"  Добавить сирену для второго УЭС   
   CLOSED: [2017-01-31 Вт 09:12]

** DONE формирование квитанции об состоянии устройства ДОМОФОН. (Нужно считать домофон БУ) - СДЕЛАНО НО НЕ ПРОВЕРЕНО.
   CLOSED: [2017-02-08 Ср 09:27]
** DONE 10. На экранах КУГО БСИ Квадрант убрать с экранов номера версии
   CLOSED: [2017-01-31 Вт 09:08]
** DONE Для КУГО сделать периодический опрос аудиоустройств(УМС2000 и Домофон) и модема 
   CLOSED: [2017-02-16 Чт 14:25]
** DONE В БСИ держать текуще состояние связи с каждой КУГОй и отправлять его после установки связи с центром.
   CLOSED: [2017-02-16 Чт 14:26]



** Оставил еще на более потом чем потом
*** 6pack разобраться с уровнями отладки, уменьшить в моих сообщениях до NOTICE , и закомитить ядро в ветку 6pack.
*** 6pack драйвер: 
*** разобраться с параметрами в  /proc/sys/net/ax25 и параметрами  kissparms.        
*** продумать варианты прямого соединения радиоканала с центром через БСИ 
*** сделать паузу P после запихивания N байт в модем в течении времени T чтобы обойти косяк модема или радиостанции
** Оставил на потом
*** Если запустить новый сеанс, не дождавшись завершения предыдущего, то теряется звук, как в первом, так и во втором сеансе. ??? ПРАВДА ЛИ ЭТО ДО СИХ ПОР ???
*** Протестировать оповещение при обрывах радиосвязи, продумать алгоритм, на случай потери команд оповещения. 
*** Сделать возможность прерывания оповещения с микрофона
*** Запомнить неотправленные квитанции в случае начала нового оповещения. 
*** Включить все сирены или наоборот все выключить.(по умолчанию)
*** Для КУГО и БСИ доработать функционал по лампочкам на передней панели
**** Сделать зависимость зажигания(потухания) лампочки  от нескольких условий
     
** Доработки сделанные полностью
*** DONE Мак адрес автоматический 
    CLOSED: [2017-05-22 Пн 17:51]
*** DONE Необходимо сделать настройку , что бы можно было отправлять подтверждение(тип сообщения 'v') на любую команду  принятую из центра, потому как по DMR  
***   ,я думаю, запросто может оказаться что приняты не все команды оповещения (так как команды рассылаются широковещательно) и пользователь в центре должен об этом знать 
***   дабы повторно запустить оповещение ,при необходимости, по неоповещенным КУГО. (Сделано в виде битов в квитанции Cостояния оборудования 's')
*** DONE Необходимо протестировать новую прошивку радиомодема (c расширеной маской escape-последовательностей) - Протестировано. 
    CLOSED: [2017-05-23 Вт 09:41]
** Ошибки исправленные полностью
*** DONE Два раза приходит состояние КОД , если его нету.
    CLOSED: [2017-05-22 Пн 17:57]
*** DONE Удалять /etc/vip/center.conf при изменении конфигов  каналов связи.
    CLOSED: [2017-05-22 Пн 17:57]
*** DONE Приизменении порта звукового перезапускать alarm-kugo alarm-bsi.
    CLOSED: [2017-05-22 Пн 17:58]
*** DONE Доработки алгоритма периодического опроса КУГО из БСИ и Доработки очереди квитанций для отправки по DMR.
    CLOSED: [2017-05-23 Вт 09:26]
**** DONE БСИ:  После посылки команды запроса квитанций сделать контроль ожидания(таймаут) одной квитанции вместо ожидания всей группы квитанций.
     CLOSED: [2017-05-23 Вт 09:26]
**** DONE БСИ:  Сделать настройку количества кругов опросов КУГОв без паузы(по окончании сеанса оповещения). Поместить настройку в вебинтерфейс.
     CLOSED: [2017-05-23 Вт 09:27]
**** DONE БСИ:  Сделать настройку паузы после опроса всех КУГОв. Поместить настройку в вебинтерфейс.
     CLOSED: [2017-05-23 Вт 09:27]
**** DONE КУГО: Сделать настройку глубины очереди квитанций. Поместить настройку в вебинтерфейс.
     CLOSED: [2017-05-23 Вт 09:26]
**** DONE КУГО: Сделать id квитанций для отправки по радиоканалу. Передавать их вместе с квитанцией в БСИ.
     CLOSED: [2017-05-23 Вт 09:26]
**** DONE БСИ:  Из БСИ В команде опроса посылать список id принятых квитанций из КУГО, для их удаления из очереди отправки.
     CLOSED: [2017-05-23 Вт 09:26]
**** DONE БСИ:  Если после посылки запроса в КУГО получили ответ , то обнуляем предыдущий список квитанций для удаления.
     CLOSED: [2017-05-23 Вт 09:26]
**** DONE КУГО: Сделать проверку глубины очереди квитанций радиоканала, удалять старые квитанции.
     CLOSED: [2017-05-23 Вт 09:26]

*** DONE Сделать состав пунктов меню web интерфейса в зависимости от режима работы устройства КУГО или БСИ: 
** Доработки сделанные частично
*** TODO Адрес центра убрать в куго для радиоканала. (пока оставил  выделил в ветку addressation)  
*** TODO Правила ввода списка абонентов сделать в радиоканальном вебе (сделано как описание а надо бы проверку при вводе делать )  
*** TODO Доработки модуля связи по радиоканалу DMR.
**** DONE Настройку количества повторов посылки команды по радиоканалу поместить в конфиг и вебинтерфейс.
     CLOSED: [2017-05-23 Вт 09:25]
**** TODO Настройку паузы между посылками команды по радиоканалу поместить в конфиг и вебинтерфейс.
     CLOSED: [2017-05-23 Вт 09:38]
*** TODO Вывести на экран КУГО/БСИ всякие менюшки: 
**** DONE Текущий Ip-адрес устройства. 
     CLOSED: [2017-05-30 Вт 09:23]
**** DONE Ip-адрес 'Заданный в конфигурации устройства'. (с возможностью редактирования)
     CLOSED: [2017-05-30 Вт 09:23]
**** DONE Способ получения Ip-адреса (DHCP/'Заданный в конфигурации устройства'). (с возможностью редактирования)
     CLOSED: [2017-05-30 Вт 09:23]
**** DONE Ip-адрес шлюза 'Заданный в конфигурации устройства'. (с возможностью редактирования)
     CLOSED: [2017-05-30 Вт 09:23]
**** DONE Текущий Mac адрес устройства.
     CLOSED: [2017-05-30 Вт 09:23]

**** Еще много чего можно добавить из web конфигуратора (Есть проблема с отображением списка абонентов)
** ПодВопросом-доработки
*** Время сеанса оповещения , брать из первой команды, если нету то из настройки в вебинтерфейсе.(пока вернул как раньше время оповещения из первой команды).
*** Статусы: отправлять статусы в случае появления канала связи если перед этим подключения по всем каналам связи отсутствовало.
*** Статусы: В квитанцию 'Состояние оборудования' предлагаю добавить бит индицирующий включение 'звукового оборудования' во время оповещения по аналогии с битом 'включения микрофона'.
** Новый протокол
*** Необходимо инкапсулировать сообщения  между "БСИ" и "П166 ИТК ОС" в 'Новый протокол'. 
**** Новый протокол нужен чтобы адресовать каждую КУГО отдельно.
**** Формат пакета нового протокола "Ключ:значение" 
**** Протокол можно реализовать в json или msgpack.
**** В 'Новом протоколе' будут следующие поля:
***** Тип сообщения ("Передача данных 'Cтарого протокола'" )
***** Адрес источника(КУГО, БСИ, "П166 ИТК ОС") (если надо)
***** Адрес назначения(КУГО, БСИ, "П166 ИТК ОС") (если надо)
***** Инкапсулированный пакет содержащий данные 'Cтарого протокола'   
**** Предусмотреть в 'Новом протоколе' следущие варианты посылки сообщений: 
***** Пакет от "П166 ИТК ОС" -> всем "КУГО":(так передавать команды оповещения) 
****** Тип сообщения ("Передача данных 'Cтарого протокола'" )
****** Адрес назначения ШИРОКОВЕЩАТЕЛЬНЫЙ АДРЕС
****** Инкапсулированный пакет содержащий данные 'Cтарого протокола'   
***** Пакет от "П166 ИТК ОС" -> конкретному "КУГО":
****** Тип сообщения ("Передача данных 'Cтарого протокола'" )
****** Адрес назначения КУГО
****** Инкапсулированный пакет содержащий данные 'Cтарого протокола'   
***** Пакет от "П166 ИТК ОС" -> "БСИ":(команда предназначена только БСИ) 
****** Тип сообщения ("Передача данных 'Cтарого протокола'" )
****** Адрес назначения БСИ
****** Инкапсулированный пакет содержащий данные 'Cтарого протокола'   
***** Пакет от "КУГО" -> "П166 ИТК ОС":
****** Тип сообщения ("Передача данных 'Cтарого протокола'" )
****** Адрес источника КУГО
****** Инкапсулированный пакет содержащий данные 'Cтарого протокола'   
***** Пакет от "БСИ" -> "П166 ИТК ОС":
****** Тип сообщения ("Передача данных 'Cтарого протокола'" )
****** Адрес источника БСИ
****** Инкапсулированный пакет содержащий данные 'Cтарого протокола'   
       
** Отчеты
*** Изменения состояния связи.
*** Неотправка сообщения между процессами и в каналахсвязи.
*** Неотправка сообщения в каналах связи.
*** Изменения состояния оборудования.
*** Изменения состояния дискретных входов.
*** Прием команды и ее выполнение.
*** Обшибки.
*** Закачка файла.
*** Включение/Выключение трансляции файла на аудиоустройство.
*** Включение/Выключение трансляции файла на радиостанцию.
** Проверки
*** Проверить статусы после оповещения для Домофона и УМС.
*** errno при записи лампочек.
** ПрямоЩас-доработки !!!!!!!!!!!!!!!!!!!!!!!!
*** Статусы json запрашиваем вместе с   состоянием оборудования (а как быть со всем этим по DMR ведь у нас json не передается)
*** Вывод звука с флэшки (http://redmine.incom.tomsk.ru/issues/2867 '#11')
*** Добавить обработку датчика звукового давления (Sdetector) в соответствии с  задачей http://redmine.incom.tomsk.ru/issues/2848
*** Взаимодействие со stmmon:  Переоткрывать порт, если  порт DinEvent(kod) или TemperatureEvent  поломался и вообще сделать все тоже самое со все остальным что общается со stmmon.
*** Добавить УЭС
**** Вывести ip каналы вниз в БСИ
*** Добавить Документацию, описание работы устройства, менюшки.

